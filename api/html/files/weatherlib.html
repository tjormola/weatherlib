<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <title>Reference</title>
    <link rel="stylesheet" href="../luadoc.css" type="text/css" />
	<!--meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/-->
</head>

<body>
<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->

<div id="main">

<div id="navigation">


<h1>LuaDoc</h1>
<ul>
	
	<li><a href="../index.html">Index</a></li>
	
</ul>


<!-- Module list -->

<h1>Modules</h1>
<ul>

	<li>
		<a href="../modules/weatherlib.html">weatherlib</a>
	</li>

</ul>



<!-- File list -->

<h1>Files</h1>
<ul>

	<li><strong>weatherlib.lua</strong></li>
	
</ul>






</div> <!-- id="navigation" -->

<div id="content">

<h1>File <code>weatherlib.lua</code></h1>


<p>Some weather related routines and solar calculations. Also provides unit conversion routines. <p> This module derives code from libgweather library which is part of the <a href="http://www.gnome.org">GNOME</a> project. libgweather is available at <a href="http://ftp.gnome.org/pub/GNOME/sources/libgweather/">http://ftp.gnome.org/pub/GNOME/sources/libgweather/</a> and it is licensed under the terms of the <a href="http://www.gnu.org/licenses/gpl-2.0.html">GNU General Public License Version 2.0</a>. </p> <p> This module derives code from the <a href="http://www.esrl.noaa.gov/gmd/grad/solcalc/">NOAA Solar Calculator</a>. Original JavaScript code at the aforementioned site is placed under public domain. </p></p>


<p><b>Author:</b>
<table class="authors_list">

	<tr><td class="name">Tuomas Jormola</td></tr>

</table>
</p>


<p>Copyright &copy;2010 Tuomas Jormola <a href="mailto:tj@solitudo.net">tj@solitudo.net</a> <a href="http://solitudo.net">http://solitudo.net</a> Licensed under the terms of the <a href="http://www.gnu.org/licenses/gpl-2.0.html">GNU General Public License Version 2.0</a>.  </p>




<h2>Functions</h2>
<table class="function_list">

	<tr>
	<td class="name" nowrap><a href="#calc_apparent_temperature">calc_apparent_temperature</a>&nbsp;(temperature, wind_speed, humidity)</td>
	<td class="summary">Calculate wind chill or heat index corrected temperature </td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#calc_heat_index">calc_heat_index</a>&nbsp;(temperature, humidity)</td>
	<td class="summary">Calculate heat index.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#calc_humidity">calc_humidity</a>&nbsp;(temperature, dewpoint)</td>
	<td class="summary">Calculate relative humidity.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#calc_moon">calc_moon</a>&nbsp;(t)</td>
	<td class="summary">Calculate moon phase and latitude at given time </td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#calc_sunrise">calc_sunrise</a>&nbsp;(date, latitude, longitude, timezone)</td>
	<td class="summary">Calculate the time of sunrise at the given date and location.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#calc_sunset">calc_sunset</a>&nbsp;(date, latitude, longitude, timezone)</td>
	<td class="summary">Calculate the time of sunset at the given date and location.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#calc_timezone_offset">calc_timezone_offset</a>&nbsp;(timezone)</td>
	<td class="summary">Calculate timezone offset from UTC in seconds for the given timezone.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#calc_wind_chill">calc_wind_chill</a>&nbsp;(temperature, wind_speed)</td>
	<td class="summary">Calculate wind chill.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#round">round</a>&nbsp;(value, precisions, precision)</td>
	<td class="summary">Round numeric value to given precisions </td>
	</tr>

</table>




<h2>Tables</h2>
<table class="table_list">

	<tr>
	<td class="name" nowrap><a href="#ANGLE_UNITS">ANGLE_UNITS</a></td>
	<td class="summary">Angle units table.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#LENGTH_UNITS">LENGTH_UNITS</a></td>
	<td class="summary">Length units table.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#PRESSURE_UNITS">PRESSURE_UNITS</a></td>
	<td class="summary">Pressure units table.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#SPEED_UNITS">SPEED_UNITS</a></td>
	<td class="summary">Speed units table.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#TEMPERATURE_UNITS">TEMPERATURE_UNITS</a></td>
	<td class="summary">Temperature units table.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#TIME_UNITS">TIME_UNITS</a></td>
	<td class="summary">Time units table.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#convert">convert</a></td>
	<td class="summary">Conversion table </td>
	</tr>

</table>



<br/>
<br/>




<h2><a name="functions"></a>Functions</h2>
<dl class="function">



<dt><a name="calc_apparent_temperature"></a><strong>calc_apparent_temperature</strong>&nbsp;(temperature, wind_speed, humidity)</dt>
<dd>
Calculate wind chill or heat index corrected temperature


<h3>Parameters</h3>
<ul>
	
	<li>
	  temperature: Temperature in Fahrenheit
	</li>
	
	<li>
	  wind_speed: Wind speed in miles per hour
	</li>
	
	<li>
	  humidity: Relative humidity as a percentage value between 0 and 100
	</li>
	
</ul>






<h3>Return value:</h3>
Apparent temperature given the weather conditions



<h3>See also:</h3>
<ul>
	
	<li><a href="../files/weatherlib.html#calc_wind_chill">
		calc_wind_chill
	</a>
	
	<li><a href="../files/weatherlib.html#calc_heat_index">
		calc_heat_index
	</a>
	
</ul>

</dd>




<dt><a name="calc_heat_index"></a><strong>calc_heat_index</strong>&nbsp;(temperature, humidity)</dt>
<dd>
Calculate heat index. If it's hot and humidity is high, temperature feels higher than what it actually is. Heat index is the approximation of the human-perceived temperature in hot and moist conditions. Heat index formula from <a href="http://www.ukscience.org/_Media/MetEquations.pdf">http://www.ukscience.org/_Media/MetEquations.pdf</a>.


<h3>Parameters</h3>
<ul>
	
	<li>
	  temperature: Temperature in Fahrenheit, must be 80 or more
	</li>
	
	<li>
	  humidity: Relative humidity as a percentage value between 40 and 100
	</li>
	
</ul>






<h3>Return value:</h3>
Heat index of the given conditions, or nil if invalid input received



</dd>




<dt><a name="calc_humidity"></a><strong>calc_humidity</strong>&nbsp;(temperature, dewpoint)</dt>
<dd>
Calculate relative humidity. Formula from <a href="http://www.gorhamschaffler.com/humidity_formulas.htm">http://www.gorhamschaffler.com/humidity_formulas.htm</a>.


<h3>Parameters</h3>
<ul>
	
	<li>
	  temperature: Temperature in Celcius
	</li>
	
	<li>
	  dewpoint: Dewpoint in Celcius
	</li>
	
</ul>






<h3>Return value:</h3>
Relative humidity as a percentage value between 0 and 100 or nil if invalid arguments



</dd>




<dt><a name="calc_moon"></a><strong>calc_moon</strong>&nbsp;(t)</dt>
<dd>
Calculate moon phase and latitude at given time


<h3>Parameters</h3>
<ul>
	
	<li>
	  t: Seconds since epoch or os.date table, universal time
	</li>
	
</ul>






<h3>Return values:</h3>
<ol>
	
	<li>Moon phase in degrees between 0 and 360
	
	<li>Moon latitude
	
</ol>



</dd>




<dt><a name="calc_sunrise"></a><strong>calc_sunrise</strong>&nbsp;(date, latitude, longitude, timezone)</dt>
<dd>
Calculate the time of sunrise at the given date and location. Routines from the JavaScript code at <a href="http://www.esrl.noaa.gov/gmd/grad/solcalc/">http://www.esrl.noaa.gov/gmd/grad/solcalc/</a>.


<h3>Parameters</h3>
<ul>
	
	<li>
	  date: an os.date table representing the date for which to calculate the time of sunrise
	</li>
	
	<li>
	  latitude: Latitude of the location
	</li>
	
	<li>
	  longitude: Longitude of the location
	</li>
	
	<li>
	  timezone: Timezone as an offset in hours from UTC at the given location
	</li>
	
</ul>






<h3>Return value:</h3>
os.date table that holds the date and time when sunrise occurs



</dd>




<dt><a name="calc_sunset"></a><strong>calc_sunset</strong>&nbsp;(date, latitude, longitude, timezone)</dt>
<dd>
Calculate the time of sunset at the given date and location. Routines from the JavaScript code at <a href="http://www.esrl.noaa.gov/gmd/grad/solcalc/">http://www.esrl.noaa.gov/gmd/grad/solcalc/</a>.


<h3>Parameters</h3>
<ul>
	
	<li>
	  date: an os.date table representing the date for which to calculate the time of sunset
	</li>
	
	<li>
	  latitude: Latitude of the location
	</li>
	
	<li>
	  longitude: Longitude of the location
	</li>
	
	<li>
	  timezone: Timezone as an offset in hours from UTC at the given location
	</li>
	
</ul>






<h3>Return value:</h3>
os.date table that holds the date and time when sunset occurs



</dd>




<dt><a name="calc_timezone_offset"></a><strong>calc_timezone_offset</strong>&nbsp;(timezone)</dt>
<dd>
Calculate timezone offset from UTC in seconds for the given timezone. Uses external command date(1). Takes Daylight Saving Time into account if the local date command supports that. Tested only on Ubuntu Linux 10.04 and Solaris 10 operating systems. May not be very portable.


<h3>Parameters</h3>
<ul>
	
	<li>
	  timezone: Timezone name, e.g. Europe/Helsinki, Asia/Bangkok, US/Pacific
	</li>
	
</ul>




<h3>Usage</h3>
<ul>
	
	<li>weatherlib.calc_timezone_offset('Europe/Helsinki') -- 7200
	
	<li>weatherlib.calc_timezone_offset('Asia/Bangkok')    -- 28800
	
	<li>weatherlib.calc_timezone_offset('US/Pacific')      -- -28800
	
</ul>



<h3>Return value:</h3>
Timezone offset in seconds from UTC. Positive for timezones ahead of UTC, negative for timezones behind UTC.



</dd>




<dt><a name="calc_wind_chill"></a><strong>calc_wind_chill</strong>&nbsp;(temperature, wind_speed)</dt>
<dd>
Calculate wind chill. If temperature is low but it's windy, the temperature feels lower than the actual measured temperature. Wind chill formula from <a href="http://www.nws.noaa.gov/om/windchill/">http://www.nws.noaa.gov/om/windchill/</a>.


<h3>Parameters</h3>
<ul>
	
	<li>
	  temperature: Temperature in Fahrenheit, must be 50 or less
	</li>
	
	<li>
	  wind_speed: Wind speed in miles per hour
	</li>
	
</ul>






<h3>Return value:</h3>
Wind chill of the given conditions, or nil if invalid input received



</dd>




<dt><a name="round"></a><strong>round</strong>&nbsp;(value, precisions, precision)</dt>
<dd>
Round numeric value to given precisions


<h3>Parameters</h3>
<ul>
	
	<li>
	  value: Value to round
	</li>
	
	<li>
	  precisions: 
	</li>
	
	<li>
	  precision: How many decimals in the rounded value, 0 by default
	</li>
	
</ul>




<h3>Usage</h3>
<ul>
	
	<li>mathlib.round(3.673242)    -- 4
	
	<li>mathlib.round(3.673242, 3) -- 3.673
	
</ul>



<h3>Return value:</h3>
Rounded value



</dd>


</dl>




<h2><a name="tables"></a>Tables</h2>
<dl class="table">

<dt><a name="ANGLE_UNITS"></a><strong>ANGLE_UNITS</strong></dt>
<dd>Angle units table. Values from this table can be used as indices to the conversion table.


<em>Fields</em>
<ul>
	
	<li>
	  DEG: Index value for degrees
	</li>
	
	<li>
	  RAD: Index value for radians
	</li>
	
	<li>
	  HOUR: Index value for hour
	</li>
	
</ul>


</dd>


<dt><a name="LENGTH_UNITS"></a><strong>LENGTH_UNITS</strong></dt>
<dd>Length units table. Values from this table can be used as indices to the conversion table.


<em>Fields</em>
<ul>
	
	<li>
	  METER: Index value for meter
	</li>
	
	<li>
	  KILOMETER: Index value for kilometer
	</li>
	
	<li>
	  FOOT: Index value for foot
	</li>
	
	<li>
	  YARD: Index value for yard
	</li>
	
	<li>
	  MILE: Index value for mile
	</li>
	
</ul>


</dd>


<dt><a name="PRESSURE_UNITS"></a><strong>PRESSURE_UNITS</strong></dt>
<dd>Pressure units table. Values from this table can be used as indices to the conversion table.


<em>Fields</em>
<ul>
	
	<li>
	  HPA: Index value for hectopascal
	</li>
	
	<li>
	  ATM: Index value for standard atmosphere
	</li>
	
	<li>
	  INHG: Index value for inches of Mercury
	</li>
	
</ul>


</dd>


<dt><a name="SPEED_UNITS"></a><strong>SPEED_UNITS</strong></dt>
<dd>Speed units table. Values from this table can be used as indices to the conversion table.


<em>Fields</em>
<ul>
	
	<li>
	  KNOT: Index value for knot
	</li>
	
	<li>
	  MS: Index value for meters per second
	</li>
	
	<li>
	  KMH: Index value for kilometers per hour
	</li>
	
	<li>
	  MPH: Index value for miles per hour
	</li>
	
</ul>


</dd>


<dt><a name="TEMPERATURE_UNITS"></a><strong>TEMPERATURE_UNITS</strong></dt>
<dd>Temperature units table. Values from this table can be used as indices to the conversion table.


<em>Fields</em>
<ul>
	
	<li>
	  CELCIUS: Index value for Celcius
	</li>
	
	<li>
	  FAHRENHEIT: Index value for Fahrenheit
	</li>
	
</ul>


</dd>


<dt><a name="TIME_UNITS"></a><strong>TIME_UNITS</strong></dt>
<dd>Time units table. Values from this table can be used as indices to the conversion table.


<em>Fields</em>
<ul>
	
	<li>
	  S: Index value for second
	</li>
	
	<li>
	  M: Index value for minute
	</li>
	
	<li>
	  H: Index value for hour
	</li>
	
</ul>


</dd>


<dt><a name="convert"></a><strong>convert</strong></dt>
<dd>Conversion table


<em>Fields</em>
<ul>
	
	<li>
	  temperature: Temperature conversion routines
	</li>
	
	<li>
	  speed: Speed conversion routines
	</li>
	
	<li>
	  pressure: Pressure conversion routines
	</li>
	
	<li>
	  length: Length conversion routines
	</li>
	
	<li>
	  time: Time conversion routines
	</li>
	
	<li>
	  angle: Angle conversion routines
	</li>
	
</ul>


</dd>


</dl>




</div> <!-- id="content" -->

</div> <!-- id="main" -->

<div id="about">
	<p><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p>
</div> <!-- id="about" -->

</div> <!-- id="container" -->	
</body>
</html>
